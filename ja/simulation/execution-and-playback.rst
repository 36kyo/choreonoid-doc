
シミュレーションの実行と再生
============================

.. sectionauthor:: 中岡 慎一郎 <s.nakaoka@aist.go.jp>

ここでは、シミュレーションの実行、停止、および再生の操作について、詳しく説明します。

.. contents:: 目次
   :local:


シミュレーションの開始
----------------------

シミュレーションを開始するには、 :doc:`simulation-project` を行った上で、以下の操作を行います。

1. 対象となるシミュレータアイテムをアイテムツリービュー上で選択する
2. シミュレーション開始ボタンを押す

1の操作は、シミュレータアイテムがひとつしか存在しない場合は必要ありません。この場合、実行すべきシミュレーションはひとつしかないので、それを特定する操作は必要ないからです。

一方で、プロジェクトは複数のシミュレータアイテムを含むこともできます。これは、シミュレーションアイテムやそのパラメータを複数用意して各々シミュレーションを行い、結果を比較するといった場合に有用です。その場合は、実行するシミュレーションを特定するために、シミュレータアイテムを選択しておく必要があります。

.. note:: 対象となるシミュレータアイテムの特定については、以下で説明する一時停止や終了の操作についても同様ですので、覚えておいて下さい。

2の操作については、シミュレーションバーのボタンを用いて行います。通常は以下の「シミュレーション開始ボタン」を用いてシミュレーションを開始します。

.. image:: ../basics/images/SimulationBar_StartButton.png

このボタンでシミュレーションを開始すると、 :ref:`simulation_setting_initial_status` で登録しておいた初期状態の位置・姿勢からシミュレーションを開始します。

シミュレーションの開始には、以下の「シミュレーション再始動ボタン」を用いることもできます。

.. image:: images/simbar-restart-button.png

この場合、開始ボタンとは異なり、登録されている初期状態ではなく、現在のモデルの状態からシミュレーションが開始されます。

シミュレーションの一時停止
--------------------------

以下の一時停止ボタンを押すことにより、実行中のシミュレーションを一時停止することができます。

.. image:: images/simbar-pause-button.png

もう一度このボタンを押すか、前述の「シミュレーション再始動ボタン」を押すと、一時停止していたシミュレーションが再開されます。


シミュレーションの終了
----------------------

以下の「シミュレーション終了ボタン」を押すと、シミュレーションが終了します。

.. image:: images/simbar-stop-button.png

この場合、一時停止とは異なり、シミュレーションに関わる全ての要素（コントローラ等も含む）の終了処理が（可能な限り）行われます。このため、終了した時と完全に同じ状態からの再開はできません。（「シミュレーション再始動ボタン」によって、終了時の位置・姿勢からシミュレーションを開始することはできますが、これは初期位置・姿勢がそうなるというだけで、それ以外の要素は初期化された状態でシミュレーションがやり直されることになります。）

一方で、終了処理によってシミュレーションの実行のために使われていたリソースも解放されますし、初期化された状態からシミュレーションをやり直すことも可能となります。

従って、シミュレーションをその場から再開する必要がある場合は一時停止を、そうでない場合は終了の操作を行うようにします。

なお、シミュレーションの設定によっては、適当な条件でシミュレーションが自動的に終了することもあります。そのようにして終了した場合は、ユーザが明示的に終了の操作を行う必要はありません。（終了条件の設定については以下で解説します。）


シミュレーションログについて
----------------------------




シミュレーション結果の再生
--------------------------

