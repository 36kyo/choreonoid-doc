サンプルコントローラ
====================

.. contents::
   :local:

ロボットの操作方法
~~~~~~~~~~~~~~~~~~

競技タスクプロトタイプでは、ロボットの操作は全てゲームパッドを用いたマニュアル操作となります。

対応ゲームパッド
^^^^^^^^^^^^^^^^
現在対応しているゲームパッドは以下になります。

* ソニープレイステーション4用ゲームパッド（Dualshock4)
* ソニープレイステーション3用ゲームパッド（Dualshock3)
* ロジクール F310
* マイクロソフト XBOX コントローラ
* マイクロソフト XBOX360 コントローラ

上記の中で既にお持ちのものがあればそれをお使いいただければ結構ですが、もし新規に購入が必要な場合は、プレイステーション4用ゲームパッド(Dualshok4)を推奨します。Dualshok4は入手が容易で、操作性・耐久性にも優れており、競技用タスクの開発にも利用しています。

.. note:: Dualshock3、4をPCで使用するためには別途Micro USBケーブルを用意する必要があります。それかDualshock4については `USBワイヤレスアダプター <http://www.jp.playstation.com/ps4/peripheral/cuhzwa1j.html>`_ を使用することも可能です。直接Bluetoothを使う接続方法については未確認です。

ゲームパッドはシミュレーションを行うPCに予め接続しておいてください。

双腕重機ロボットの操作方法
^^^^^^^^^^^^^^^^^^^^^^^^^^

ゲームパッドを用いた双腕重機ロボット(DoubleArmV7)の操作方法は以下のようになっています。

.. list-table::
 :widths: 10, 10

 * - 方向キー
   - クローラ
 * - L1ボタン + 左スティック
   - クローラ
 * - L1ボタン + 右スティック
   - クローラ
 * - 左スティック横軸
   - アームベース ヨー軸
 * - 右スティック横軸
   - アーム第一関節 ヨー軸
 * - 左スティック縦軸
   - アーム第一関節 ピッチ軸
 * - 右スティック縦軸
   - アーム第二関節 ピッチ軸
 * - Y、Aボタン（△、×ボタン）
   - エンドエフェクタ ピッチ軸
 * - X、Bボタン（□、○ボタン）
   - エンドエフェクタ ヨー軸
 * - L1ボタン + X、Bボタン（□、○ボタン）
   - エンドエフェクタ ロール軸
 * - R1ボタン、R2トリガ
   - エンドエフェクタ 開閉
 * - ロゴボタン(PSボタン）
   - 操作対象アームの切り替え

L1ボタンは一部のスティックやボタンに関して操作対象を切り替えるボタンになっています。「L1ボタン + …」となっている箇所は、L1ボタンを押しながら「…」の部分を操作します。

Aizu Spiderの操作方法
^^^^^^^^^^^^^^^^^^^^^

Aizu Spiderについては、車体がAizu Spiderの本体となっており、そこにJACO2アームが0本〜2本装着される構成となっています。

ゲームパッドの操作では、まず操作対象をロゴボタン(PSボタン）で切り替えます。最初は車体が対象となっていて、ボタンを押すたびに

・車体 → アーム1 → アーム2 → 車体 → …

といったかたちで切り替わります。

車体部の操作方法は以下のようになっています。

.. list-table::
 :widths: 10, 10

 * - 方向キー
   - クローラ
 * - 左スティック
   - クローラ
 * - 右スティック
   - 全フリッパの昇降
 * - L2ボタン + 右スティック
   - 左前部フリッパの昇降
 * - R2ボタン + 右スティック
   - 右前部フリッパの昇降
 * - L1ボタン + 右スティック
   - 左後部フリッパの昇降
 * - R1ボタン + 右スティック
   - 右後部フリッパの昇降
 * - 右スティックボタン（右スティックを押し込む）
   - 全フリッパの位置を揃える

| ※ 方向キーは操作対象が何であってもクローラの操作となります。
| ※ L1, L2, R1, R2 は任意の組み合わせで利用可能です。例えばL1とL2の両方を押しながら右スティックを操作すると、左側の２つのフリッパを同時に操作できます。

アーム部の操作方法は以下のようになります。

.. list-table::
 :widths: 10, 10

 * - 左スティック横軸
   - アーム第１関節
 * - 左スティック縦軸
   - アーム第２関節
 * - 右スティック縦軸
   - アーム第３関節
 * - 右スティック横軸
   - アーム第４関節
 * - X、Bボタン（□、○ボタン）
   - アーム第５関節
 * - L1、R1ボタン
   - アーム第６関節
 * - L2、R2トリガ
   - ハンドの開閉

注意事項
^^^^^^^^

ここで紹介したゲームパッドによるマニュアル操作は、テストのための必要最低限の機能を提供するものであり、手先の逆運動学操作もできないような非常に低水準のものです。実際の競技ではこれと同じ操作方法にする必要は全くありません。本競技では、マニュアル操作のスキルを競うというよりは、効率的な操作インタフェースの構築やロボットの行動の自律化などで、ロボットのタスク遂行能力を競っていただきたく思っています。

プロトタイプではシミュレータと直結するコントローラ内でロボットの操作の全てを処理していますが、実際の競技ではロボットの操作はネットワークで接続された別のPC上の操作端末から行う必要があります。これを行うための通信プログラム等は参加者各自が開発する必要があります。（通信プログラムは一般的にはROSやOpenRTMを利用して構築します。）

今後上記も考慮した遠隔操作インタフェースのサンプルも提供していく予定です。

